<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat</title>
    <link rel="icon" type="image/png" href="img/icon.png">
    <style>
        /* 基础样式重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8fafc;
            height: 100vh;
            overflow: hidden;
        }

        /* AI聊天页面特定样式 */
        .chat-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ai-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .chat-info h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .chat-info p {
            margin: 0.25rem 0 0 0;
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .chat-status {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: #f8fafc;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            display: flex;
            gap: 0.75rem;
            max-width: 80%;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .message-content {
            background: white;
            padding: 1rem 1.25rem;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            word-wrap: break-word;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: white;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 0.5rem;
            text-align: right;
        }

        .message.ai .message-time {
            text-align: left;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 0.75rem;
            max-width: 80%;
        }

        .typing-indicator.show {
            display: flex;
        }

        .typing-dots {
            background: white;
            padding: 1rem 1.25rem;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .chat-input-container {
            padding: 1.5rem 2rem;
            background: white;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .chat-input-wrapper {
            flex: 1;
            position: relative;
        }

        .chat-input {
            width: 100%;
            min-height: 50px;
            max-height: 120px;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            resize: none;
            font-family: inherit;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
            background: #f8fafc;
        }

        .chat-input:focus {
            border-color: #667eea;
            background: white;
        }

        .chat-input::placeholder {
            color: #9ca3af;
        }

        .send-button {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .quick-actions {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .quick-action {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            color: #374151;
        }

        .quick-action:hover {
            border-color: #667eea;
            background: #f0f4ff;
            color: #667eea;
        }

        .welcome-message {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
        }

        .welcome-message h3 {
            color: #374151;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .welcome-message p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .features-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .feature-item {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid #e5e7eb;
            text-align: center;
        }

        .feature-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .feature-item h4 {
            margin: 0 0 0.5rem 0;
            color: #374151;
            font-size: 0.9rem;
        }

        .feature-item p {
            margin: 0;
            font-size: 0.8rem;
            color: #6b7280;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .chat-container {
                margin: 0;
                height: 100vh;
                border-radius: 0;
            }

            .chat-header {
                padding: 1rem;
            }

            .chat-info h2 {
                font-size: 1.2rem;
            }

            .chat-messages {
                padding: 1rem;
            }

            .message {
                max-width: 90%;
            }

            .chat-input-container {
                padding: 1rem;
            }

            .features-list {
                grid-template-columns: 1fr;
            }

            .quick-actions {
                justify-content: center;
            }
        }

        /* 滚动条样式 */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>
<body>
    <!-- 主要内容 -->
    <main>
        <div class="chat-container">
            <!-- 聊天头部 -->
            <div class="chat-header">
                <div class="ai-avatar">🤖</div>
                <div class="chat-info">
                    <h2 data-translate="aiAssistant">AI Assistant</h2>
                    <p data-translate="aiDescription">Your intelligent conversation partner</p>
                </div>
                <div class="chat-status">
                    <div class="status-dot"></div>
                    <span data-translate="online">Online</span>
                </div>
            </div>

            <!-- 聊天消息区域 -->
                <div class="chat-messages" id="chatMessages">
                    <!-- 欢迎消息 -->
                    <div class="welcome-message">
                        <h3 data-translate="welcomeTitle">Welcome to AI Chat!</h3>
                        <p data-translate="welcomeMessage">I'm your AI assistant. I can help you with questions, have conversations, or assist with various tasks. How can I help you today?</p>
                        
                        <!-- 快速操作按钮 -->
                        <div class="quick-actions">
                            <div class="quick-action" data-action="greeting" data-translate="sayHello">👋 Say Hello</div>
                            <div class="quick-action" data-action="help" data-translate="getHelp">❓ Get Help</div>
                            <div class="quick-action" data-action="joke" data-translate="tellJoke">😄 Tell a Joke</div>
                            <div class="quick-action" data-action="weather" data-translate="checkWeather">🌤️ Check Weather</div>
                        </div>

                        <!-- 功能介绍 -->
                        <div class="features-list">
                            <div class="feature-item">
                                <div class="feature-icon">💬</div>
                                <h4 data-translate="featureChat">Chat</h4>
                                <p data-translate="featureChatDesc">Natural conversations</p>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🧠</div>
                                <h4 data-translate="featureSmart">Smart</h4>
                                <p data-translate="featureSmartDesc">Intelligent responses</p>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">⚡</div>
                                <h4 data-translate="featureFast">Fast</h4>
                                <p data-translate="featureFastDesc">Quick replies</p>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🔒</div>
                                <h4 data-translate="featureSafe">Safe</h4>
                                <p data-translate="featureSafeDesc">Secure conversations</p>
                            </div>
                        </div>
                    </div>

                    <!-- 打字指示器 -->
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="message-avatar ai">🤖</div>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>

                <!-- 聊天输入区域 -->
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea 
                            class="chat-input" 
                            id="chatInput" 
                            placeholder="Type your message here..."
                            data-translate-placeholder="inputPlaceholder"
                            rows="1"
                        ></textarea>
                    </div>
                    <button class="send-button" id="sendButton" title="Send message">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- 简化的语言支持 -->
    <script>
        // 简单的语言支持
        const translations = {
            en: {
                aiAssistant: 'AI Assistant',
                aiDescription: 'Your intelligent conversation partner',
                online: 'Online',
                welcomeTitle: 'Welcome to AI Chat!',
                welcomeMessage: 'I\'m your AI assistant. I can help you with questions, have conversations, or assist with various tasks. How can I help you today?',
                sayHello: '👋 Say Hello',
                getHelp: '❓ Get Help',
                tellJoke: '😄 Tell a Joke',
                checkWeather: '🌤️ Check Weather',
                inputPlaceholder: 'Type your message here...',
                featureChat: 'Chat',
                featureChatDesc: 'Natural conversations',
                featureSmart: 'Smart',
                featureSmartDesc: 'Intelligent responses',
                featureFast: 'Fast',
                featureFastDesc: 'Quick replies',
                featureSafe: 'Safe',
                featureSafeDesc: 'Secure conversations'
            },
            id: {
                aiAssistant: 'Asisten AI',
                aiDescription: 'Partner percakapan cerdas Anda',
                online: 'Online',
                welcomeTitle: 'Selamat Datang di AI Chat!',
                welcomeMessage: 'Saya adalah asisten AI Anda. Saya dapat membantu Anda dengan pertanyaan, percakapan, atau membantu dengan berbagai tugas. Bagaimana saya bisa membantu Anda hari ini?',
                sayHello: '👋 Halo',
                getHelp: '❓ Butuh Bantuan',
                tellJoke: '😄 Ceritakan Lelucon',
                checkWeather: '🌤️ Cek Cuaca',
                inputPlaceholder: 'Ketik pesan Anda di sini...',
                featureChat: 'Chat',
                featureChatDesc: 'Percakapan alami',
                featureSmart: 'Cerdas',
                featureSmartDesc: 'Respons cerdas',
                featureFast: 'Cepat',
                featureFastDesc: 'Balasan cepat',
                featureSafe: 'Aman',
                featureSafeDesc: 'Percakapan aman'
            }
        };

        // 检测语言
        let currentLanguage = 'en';
        if (window.location.pathname.includes('_id.html')) {
            currentLanguage = 'id';
        }

        // 更新翻译
        function updateTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }

        // 更新占位符
        function updatePlaceholders() {
            const elements = document.querySelectorAll('[data-translate-placeholder]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
        }

        // 页面加载完成后更新翻译
        document.addEventListener('DOMContentLoaded', function() {
            updateTranslations();
            updatePlaceholders();
        });
    </script>
    <script>
        // AI聊天功能
        class AIChat {
            constructor() {
                this.chatMessages = document.getElementById('chatMessages');
                this.chatInput = document.getElementById('chatInput');
                this.sendButton = document.getElementById('sendButton');
                this.typingIndicator = document.getElementById('typingIndicator');
                this.isTyping = false;
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.setupQuickActions();
                this.autoResizeInput();
            }

            setupEventListeners() {
                // 发送按钮点击事件
                this.sendButton.addEventListener('click', () => {
                    this.sendMessage();
                });

                // 输入框回车事件
                this.chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // 输入框输入事件
                this.chatInput.addEventListener('input', () => {
                    this.autoResizeInput();
                    this.updateSendButton();
                });
            }

            setupQuickActions() {
                const quickActions = document.querySelectorAll('.quick-action');
                quickActions.forEach(action => {
                    action.addEventListener('click', () => {
                        const actionType = action.getAttribute('data-action');
                        this.handleQuickAction(actionType);
                    });
                });
            }

            handleQuickAction(actionType) {
                let message = '';
                switch (actionType) {
                    case 'greeting':
                        message = 'Hello! How are you today?';
                        break;
                    case 'help':
                        message = 'What can you help me with?';
                        break;
                    case 'joke':
                        message = 'Tell me a funny joke!';
                        break;
                    case 'weather':
                        message = 'What\'s the weather like today?';
                        break;
                }
                
                // 直接发送消息，不通过输入框
                this.sendQuickMessage(message);
            }

            async sendQuickMessage(message) {
                if (!message || this.isTyping) return;

                // 添加用户消息
                this.addMessage(message, 'user');

                // 显示打字指示器
                this.showTypingIndicator();

                try {
                    // 模拟AI响应
                    const response = await this.getAIResponse(message);
                    this.hideTypingIndicator();
                    // 确保AI消息在用户消息下方显示
                    setTimeout(() => {
                        this.addMessage(response, 'ai');
                    }, 100);
                } catch (error) {
                    this.hideTypingIndicator();
                    setTimeout(() => {
                        this.addMessage('Sorry, I encountered an error. Please try again.', 'ai');
                    }, 100);
                }
            }

            autoResizeInput() {
                this.chatInput.style.height = 'auto';
                this.chatInput.style.height = Math.min(this.chatInput.scrollHeight, 120) + 'px';
            }

            updateSendButton() {
                const hasText = this.chatInput.value.trim().length > 0;
                this.sendButton.disabled = !hasText || this.isTyping;
            }

            async sendMessage() {
                const message = this.chatInput.value.trim();
                if (!message || this.isTyping) return;

                // 添加用户消息
                this.addMessage(message, 'user');
                this.chatInput.value = '';
                this.autoResizeInput();
                this.updateSendButton();

                // 显示打字指示器
                this.showTypingIndicator();

                try {
                    // 模拟AI响应
                    const response = await this.getAIResponse(message);
                    this.hideTypingIndicator();
                    // 确保AI消息在用户消息下方显示
                    setTimeout(() => {
                        this.addMessage(response, 'ai');
                    }, 100);
                } catch (error) {
                    this.hideTypingIndicator();
                    setTimeout(() => {
                        this.addMessage('Sorry, I encountered an error. Please try again.', 'ai');
                    }, 100);
                }
            }

            addMessage(content, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const avatar = document.createElement('div');
                avatar.className = 'message-avatar';
                avatar.textContent = sender === 'user' ? '👤' : '🤖';
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                messageContent.textContent = content;
                
                const messageTime = document.createElement('div');
                messageTime.className = 'message-time';
                messageTime.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                messageContent.appendChild(messageTime);
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(messageContent);
                
                // 移除欢迎消息（只在第一次添加消息时移除）
                const welcomeMessage = this.chatMessages.querySelector('.welcome-message');
                if (welcomeMessage && sender === 'user') {
                    welcomeMessage.remove();
                }
                
                // 移除打字指示器（如果存在）
                const typingIndicator = this.chatMessages.querySelector('.typing-indicator.show');
                if (typingIndicator && sender === 'ai') {
                    typingIndicator.remove();
                }
                
                // 将消息添加到聊天区域
                this.chatMessages.appendChild(messageDiv);
                
                // 滚动到底部
                this.scrollToBottom();
            }

            showTypingIndicator() {
                this.isTyping = true;
                this.typingIndicator.classList.add('show');
                this.updateSendButton();
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                this.isTyping = false;
                this.typingIndicator.classList.remove('show');
                this.updateSendButton();
            }

            async getAIResponse(userMessage) {
                // 模拟AI响应延迟
                await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 2000));

                // 简单的AI响应逻辑
                const message = userMessage.toLowerCase();
                
                if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                    return "Hello! It's great to meet you! How can I assist you today?";
                }
                
                if (message.includes('how are you')) {
                    return "I'm doing great, thank you for asking! I'm here and ready to help with whatever you need.";
                }
                
                if (message.includes('joke') || message.includes('funny')) {
                    const jokes = [
                        "Why don't scientists trust atoms? Because they make up everything! 😄",
                        "Why did the scarecrow win an award? He was outstanding in his field! 🌾",
                        "Why don't eggs tell jokes? They'd crack each other up! 🥚",
                        "What do you call a fake noodle? An impasta! 🍝"
                    ];
                    return jokes[Math.floor(Math.random() * jokes.length)];
                }
                
                if (message.includes('weather')) {
                    return "I'd love to help with weather information! However, I don't have access to real-time weather data. You might want to check a weather app or website for current conditions in your area.";
                }
                
                if (message.includes('help') || message.includes('what can you do')) {
                    return "I can help you with conversations, answer questions, tell jokes, provide information on various topics, and assist with general tasks. What would you like to know or discuss?";
                }
                
                if (message.includes('thank')) {
                    return "You're very welcome! I'm happy to help. Is there anything else you'd like to know or discuss?";
                }
                
                if (message.includes('bye') || message.includes('goodbye')) {
                    return "Goodbye! It was nice chatting with you. Feel free to come back anytime you need assistance!";
                }
                
                // 默认响应
                const responses = [
                    "That's an interesting question! Could you tell me more about what you're looking for?",
                    "I understand you're asking about that topic. Let me help you explore it further.",
                    "Thanks for sharing that with me. What aspect would you like to discuss?",
                    "I see what you mean. Here's my perspective on that...",
                    "That's a great point! Let me think about that and provide you with a helpful response."
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }

            scrollToBottom() {
                setTimeout(() => {
                    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
                }, 100);
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化AI聊天
            window.aiChat = new AIChat();
        });
    </script>
</body>
</html>
